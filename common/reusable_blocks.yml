# resource types
mattermost-resouce-type: &mattermost-resouce-type
  name: mattermost-notification
  type: registry-image
  source:
    repository: cfcommunity/slack-notification-resource
    tag: ((slack-notification-resource-tag))
    username: ((docker_hub_username))
    password: ((docker_hub_password))

# resources
mattermost-resource: &mattermost-resource
  name: notify-mattermost
  type: mattermost-notification
  icon: webhook
  source:
    url: ((mattermost_webhook_url))

# task image resources
bitwarden-cli-image-resource: &bitwarden-cli-image-resource
  type: registry-image
  source:
    repository: flipenergy/bitwarden_cli
    username: ((docker_hub_username))
    password: ((docker_hub_password))

oci-build-image-resource: &oci-build-image-resource
  type: registry-image
  source:
    repository: vito/oci-build-task
    tag: ((oci_build_task__image_tag))
    username: ((docker_hub_username))
    password: ((docker_hub_password))

helmsman-image-resource: &helmsman-image-resource
  type: registry-image
  source:
    repository: praqma/helmsman
    tag: ((helmsman_image_tag))
    username: ((docker_hub_username))
    password: ((docker_hub_password))

yq-image-resource: &yq-image-resource
  type: registry-image
  source:
    repository: mikefarah/yq
    tag: ((yq_image_tag))
    username: ((docker_hub_username))
    password: ((docker_hub_password))

git-image-resource: &git-image-resource
  type: registry-image
  source:
    repository: alpine/git
    tag: ((alpine_git_tag))
    username: ((docker_hub_username))
    password: ((docker_hub_password))

helm-image-resource: &helm-image-resource
  type: registry-image
  source:
    repository: alpine/helm
    tag: ((alpine_helm_tag))
    username: ((docker_hub_username))
    password: ((docker_hub_password))

# notifications
notify-success: &notify-success
  put: notify-mattermost
  params:
    icon_url: ((concourse-logo-url))
    text: ((success_text))

notify-failure: &notify-failure
  put: notify-mattermost
  params:
    icon_url: ((concourse-logo-url))
    text: ((failed_text))

# end reusable blocks
